package pe060;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import numbers.Numbers;

class Work60 {

	private static Numbers num = new Numbers();
	private static final List<Long> PRIMES = findPrimes(10000);
	
	private static List<Long> findPrimes(int n) {
		num.findPrimesLessThan(n);
		return num.primesList().subList(1, num.primeCount());
	}
	
	private static boolean check(List<Long> xs, long y) {
		if (y > num.primeSeed()) return false;
		for (long x : xs) {
			long t1 = x * ((int) (Math.pow(10, (int) Math.log10(y) + 1))) + y;
			if (!num.isPrime(t1)) return false;
			long t2 = y * ((int) (Math.pow(10, (int) Math.log10(x) + 1))) + x;
			if (!num.isPrime(t2)) return false;
			
		}
		return true;
	}

	private static ArrayList<Long> find(ArrayList<Long> fnd, int pos) {
		try {
			if (fnd.size() == 4) return fnd;
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		try {
			if (pos == PRIMES.size()) {
				int ix = fnd.size() - 1;
				System.out.println(ix);
				long o = fnd.remove(ix);
				return find(fnd, PRIMES.indexOf(o + 1));
			}
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		try {
			if (check(fnd, PRIMES.get(pos))) {
				fnd.add(PRIMES.get(pos));
				return find(fnd, ++pos);
			}
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return find(fnd, ++pos);
	}
	
	public static Long doIt() {
		long ans = 0;
		ArrayList<Long> l = new ArrayList<>();
		ArrayList<Long> f = find(l, 0);
		System.out.println(f);
		return ans;
	}
}
